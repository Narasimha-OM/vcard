<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Moksha Secured Systems - Digital VCard</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
:root {
    --primary-color: #0b457e;
    --text-light: #ffffff;
    --text-dark: #333333;
    --logo-size: 100px;
}

/* ===== Body ===== */
body { margin:0; font-family:"Poppins",sans-serif; background-color:#f8f9fa; color:var(--text-dark); line-height:1.6; }

/* ===== VCard ===== */
.vcard-container { max-width:460px; margin:30px auto; background:#fff; border-radius:12px; box-shadow:0 4px 18px rgba(0,0,0,0.12); overflow:hidden; opacity:0; transition:opacity 1s ease-in; }
.vcard-container.loaded { opacity:1; }
.vcard-header { background:var(--primary-color); color:var(--text-light); padding:80px 20px 60px; text-align:center; position:relative; }
.profile-img { width:var(--logo-size); height:var(--logo-size); border-radius:50%; background-color:var(--text-light); border:4px solid var(--text-light); position:absolute; top:20px; left:50%; transform:translateX(-50%); background-image:url('./profile.jpg'); background-size:cover; background-position:center; box-shadow:0 2px 8px rgba(0,0,0,0.2); }
.name { margin-top:60px; font-size:1.9em; font-weight:700; }
.title { font-size:1.1em; font-weight:500; opacity:0.87; margin-top:6px; color: rgba(255,255,255,0.9); letter-spacing: 1px; text-transform: uppercase; position: relative; display: inline-block; }
.title::after { content:''; display:block; width:40px; height:2px; background:#ffffff; margin:6px auto 0; border-radius:2px; }

/* Header Buttons */
.header-buttons { display:flex; gap:8px; margin-top:18px; padding:0 12px; }
.header-btn { flex:1; padding:10px 0; text-align:center; color:var(--text-light); text-decoration:none; font-size:0.95em; font-weight:600; border-radius:6px; background:rgba(255,255,255,0.15); transition: background 0.25s, transform 0.2s, box-shadow 0.2s; box-shadow:0 4px 6px rgba(0,0,0,0.15); }
.header-btn:hover { background: rgba(255,255,255,0.28); transform: translateY(-3px); box-shadow:0 8px 14px rgba(0,0,0,0.25); }
.header-btn i { margin-right:6px; font-size:1.2em; }

/* Details */
.vcard-details { padding:24px 22px; background:#fff; color:var(--text-dark); }
.vcard-row { display:flex; align-items:center; padding:14px 0; border-bottom:1px solid #EAEAEA; }
.vcard-row:last-child { border-bottom:none; }
.vcard-icon { font-size:1.5em; color:#6c757d; margin-right:14px; min-width:28px; text-align:center; padding-bottom:2px; }
.vcard-content .value { font-size:1.12em; font-weight:500; color:var(--text-dark); }
.vcard-content .label { font-size:0.88em; color:#777; margin-top:2px; margin-bottom:4px; }

/* Download button */
.vcard-action-container { padding:18px 20px 10px; background:#fefefe; }
.vcard-btn { display:block; text-align:center; padding:13px 0; border-radius:8px; font-size:1em; font-weight:600; background-color:#4285F4; color:white; text-decoration:none; transition: background 0.3s ease, transform 0.15s ease, box-shadow 0.2s; box-shadow:0 4px 8px rgba(0,0,0,0.2); cursor:pointer; }
.vcard-btn:hover { background-color:#367ce4; transform:translateY(-3px); box-shadow:0 8px 14px rgba(0,0,0,0.3); }

/* Welcome Loader */
.welcome-screen { position:fixed; inset:0; background:#fff; display:flex; justify-content:center; align-items:center; z-index:9999; opacity:1; visibility:visible; transition:opacity 1s ease, visibility 1s ease; }
.welcome-screen.hidden { opacity:0; visibility:hidden; pointer-events:none; }
.profile-img-loader { width:500px; height:500px; background-image:url('https://img1.wsimg.com/isteam/ip/4146d706-7644-40f8-8cc0-05b1be02f55a/blob.png'); background-size:contain; background-repeat:no-repeat; background-position:center; animation:zoomPulse 2s infinite ease-in-out; }
@keyframes zoomPulse { 0%{transform:scale(1);}50%{transform:scale(1.2);}100%{transform:scale(1);} }

/* Lead Modal */
#leadModal{ position:fixed; inset:0; background:rgba(0,0,0,0.7); display:flex; justify-content:center; align-items:center; z-index:9999; opacity:0; pointer-events:none; transition:opacity .5s ease; }
#leadModal.active{ opacity:1; pointer-events:auto; }
.lead-card{ background:linear-gradient(145deg,#ffffff,#e6f0ff); border-radius:25px 10%; padding:30px; width:90%; max-width:380px; text-align:center; box-shadow:0 15px 40px rgba(0,0,0,0.35); transform:translateY(-30px) rotateX(5deg) perspective(600px); transition:transform 0.5s cubic-bezier(.68,-.55,.27,1.55); }
#leadModal.active .lead-card{ transform:translateY(0) rotateX(0deg); border-radius:25% 10%; }
.lead-header h2{ margin:0; font-size:1.8em; color:#0b457e; text-shadow:0 2px 8px rgba(0,0,0,0.2); }
.lead-header p{ margin:6px 0 20px; font-size:1em; color:#555; }
.lead-form input{ width:100%; padding:12px; margin:10px 0; border-radius:8px; border:1px solid #ccc; font-size:1em; outline:none; transition:0.3s; box-shadow: inset 0 2px 5px rgba(0,0,0,0.05); }
.lead-form input:focus{ border-color:#0b457e; box-shadow:0 0 10px rgba(11,69,126,0.4); }
.lead-form button{ width:100%; padding:14px; margin-top:15px; border:none; border-radius:12px; font-size:1.1em; font-weight:600; background:#0b457e; color:#fff; cursor:pointer; box-shadow:0 6px 14px rgba(0,0,0,0.25),0 0 12px rgba(11,69,126,0.4); transition:transform 0.2s, box-shadow 0.25s, background 0.3s; }
.lead-form button:hover{ transform:translateY(-3px) scale(1.02); box-shadow:0 10px 20px rgba(0,0,0,0.3),0 0 18px rgba(11,69,126,0.6); background:#09325b; }

/* FAB & Radial Share */
.fab-container { position: fixed; bottom: 22px; right: 22px; display: flex; flex-direction: column; align-items: flex-end; gap: 10px; z-index:100; }
.fab-btn { width: 56px; height: 56px; border-radius: 50%; border: none; font-size: 1.3em; cursor: pointer; display:flex; align-items:center; justify-content:center; }
.fab-share { background-color: #f8f9fa; color: var(--text-dark); box-shadow: 0 3px 7px rgba(0, 0, 0, 0.12); }
.fab-share:hover { background-color: #ececec; }
.fab-contact { background-color: #66b3ff; color: white; }
.fab-contact:hover { background-color: #4da6ff; }

/* ===========================
   SHARE PANEL (Hidden / Expandable)
============================ */
.vcard-share-container {
    padding: 12px 20px 20px;
    background-color: #fafafa;
    transition: all 0.5s ease;
    max-height: 0;
    overflow: hidden;
    opacity: 0;
}

.vcard-share-container.expanded {
    max-height: 260px;
    opacity: 1;
}

.share-header {
    text-align: center;
    font-size: 1em;
    font-weight: 600;
    color: #555;
    padding: 10px 0;
    border-bottom: 1px solid #EAEAEA;
    margin-bottom: 12px;
}

.share-options {
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
}

.share-button {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-decoration: none;
    color: var(--text-dark);
    font-size: 0.85em;
    margin: 8px 4px;
}

.share-icon-circle {
    width: 46px;
    height: 46px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-size: 1.25em;
    margin-bottom: 5px;
    transition: transform 0.15s, box-shadow 0.2s;
}

.share-icon-circle:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 12px rgba(0,0,0,0.15);
}

.facebook .share-icon-circle { background-color: #3b5998; }
.x-twitter .share-icon-circle { background-color: #000000; }
.whatsapp .share-icon-circle { background-color: #25d366; }
.copy-link .share-icon-circle { background-color: #6c757d; }
</style>
</head>
<body>

<!-- Welcome Loader -->
<div id="welcomeScreen" class="welcome-screen">
    <div class="profile-img-loader"></div>
</div>

<!-- Lead Modal -->
<div id="leadModal">
  <div class="lead-card">
    <div class="lead-header">
      <h2>Moksha Secured Systems</h2>
      <p>Enter your details to get started</p>
    </div>
    <div class="lead-form">
      <input id="leadName" placeholder="Your Name">
      <input id="leadMobile" placeholder="Mobile Number">
      <button id="leadSubmit">Continue</button>
    </div>
  </div>
</div>

<!-- Main vCard -->
<div id="vcardContainer" class="vcard-container">
  <div class="vcard-header">
    <div class="profile-img"></div>
    <h1 class="name">Narasimha Reddy</h1>
    <p class="title">Moksha Secured Systems</p>
    <div class="header-buttons">
      <a href="tel:+916300729253" class="header-btn"><i class="fas fa-phone"></i>CALL</a>
      <a href="#" class="header-btn whatsapp-btn"><i class="fab fa-whatsapp"></i>WHATSAPP</a>
      <a href="#" class="header-btn email-btn"><i class="fas fa-envelope"></i>EMAIL</a>
    </div>
  </div>
  <div class="vcard-details">
    <div class="vcard-row">
      <div class="vcard-icon"><i class="fas fa-phone"></i></div>
      <div class="vcard-content"><p class="value">+91 6300729253</p><p class="label">Mobile</p></div>
    </div>
    <div class="vcard-row">
      <div class="vcard-icon"><i class="fas fa-briefcase"></i></div>
      <div class="vcard-content"><p class="value">Moksha Secured Systems</p><p class="label">Company</p></div>
    </div>
    <div class="vcard-row">
      <div class="vcard-icon"><i class="fas fa-envelope"></i></div>
      <div class="vcard-content"><p class="value">Narasimha@MokshaSecuredSystems.com</p><p class="label">Email</p></div>
    </div>
    <div class="vcard-row">
      <div class="vcard-icon"><i class="fas fa-globe"></i></div>
      <div class="vcard-content"><p class="value">https://MokshaSecuredSystems.com</p><p class="label">Website</p></div>
    </div>
  </div>
  <div class="vcard-action-container">
    <a class="vcard-btn" onclick="downloadVCF()"><i class="fas fa-user-plus"></i> DOWNLOAD VCARD</a>
  </div>
</div>

<!-- Share Container -->
<div id="shareContainer" class="vcard-share-container">
  <div class="share-header"><i class="fas fa-share-alt"></i> SHARE THIS PAGE</div>
  <div class="share-options">
      <a href="#" class="share-button facebook" onclick="shareSocial('facebook')">
          <span class="share-icon-circle"><i class="fab fa-facebook-f"></i></span>Facebook
      </a>
      <a href="#" class="share-button x-twitter" onclick="shareSocial('x')">
          <span class="share-icon-circle"><i class="fab fa-twitter"></i></span>X
      </a>
      <a href="#" class="share-button whatsapp" onclick="shareSocial('whatsapp')">
          <span class="share-icon-circle"><i class="fab fa-whatsapp"></i></span>Whatsapp
      </a>
      <div class="share-button copy-link" onclick="copyLink()">
          <span class="share-icon-circle"><i class="fas fa-copy"></i></span>Copy Link
      </div>
  </div>
</div>

<!-- FAB Buttons -->
<div class="fab-container">
    <button class="fab-btn fab-share" onclick="toggleShareOptions()">
        <i class="fas fa-share-alt"></i>
    </button>
    <button class="fab-btn fab-contact">
        <i class="fas fa-user-plus"></i>
    </button>
</div>

<script>
// Welcome screen
const welcome = document.getElementById('welcomeScreen');
const vcard = document.getElementById('vcardContainer');
const leadModal = document.getElementById('leadModal');
const leadSubmit = document.getElementById('leadSubmit');

let leadSaved = false;
let leadData = { name: '', mobile: '' };

window.addEventListener('load', ()=>{
    setTimeout(()=>{ welcome.classList.add('hidden'); vcard.classList.add('loaded'); }, 1000);
    setTimeout(()=>{ leadModal.classList.add('active'); }, 6000);
});

// Lead Modal Submit
leadSubmit.addEventListener('click', () => {
    const name = document.getElementById('leadName').value.trim();
    const mobile = document.getElementById('leadMobile').value.trim();
    
    if(!name || !mobile) {
        alert('Please enter both fields');
        return;
    }

      // Replace this with your NEW URL from Step 2
    const url = "https://script.google.com/macros/s/AKfycbyQF6ZGS-F4H4WXFlaWvD-9owCq7IlGGOP5uh6BI6wlh49ZnKEO7sZPXWDFspPyBo-tKw/exec";

    fetch(url, {
        method: "POST",
        mode: "no-cors", // This bypasses CORS errors, but you won't see the 'success' JSON
        cache: "no-cache",
        headers: { "Content-Type": "text/plain;charset=utf-8" },
        body: JSON.stringify({ name: name, mobile: mobile })
    })
    .then(() => {
        // Because of 'no-cors', we assume success if the fetch completes
        alert(`Thanks ${name}, your details have been saved!`);
        leadModal.classList.remove('active');
        leadSaved = true;
        leadData = { name, mobile };
    })
    .catch(err => {
        console.error(err);
        alert("Submission failed. Check your internet or script URL.");
    });
});
// Download vCard
function downloadVCF() {
    const vcf = `
BEGIN:VCARD
VERSION:3.0
FN:Narasimha Reddy
ORG:Moksha Secured Systems
TEL;TYPE=CELL:+916300729253
EMAIL:Narasimha@MokshaSecuredSystems.com
URL:https://MokshaSecuredSystems.com
END:VCARD`;
    const a = document.createElement('a');
    a.href = "data:text/vcard;base64," + btoa(vcf);
    a.download = "Narasimha_Reddy.vcf";
    a.click();
}

// Toggle share panel
function toggleShareOptions() {
    document.getElementById('shareContainer').classList.toggle('expanded');
}

// Copy link
function copyLink() {
    navigator.clipboard.writeText(window.location.href)
        .then(() => alert('Link copied!'))
        .catch(() => alert('Copy failed!'));
}

// Social share
function shareSocial(platform) {
    if(!leadSaved){ alert("Please enter your details first!"); leadModal.classList.add('active'); return; }
    const msg = encodeURIComponent(`Hi, my name is ${leadData.name}. Check out this digital card: ${window.location.href}`);
    let shareURL = '';
    if (platform === 'facebook') shareURL = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`;
    if (platform === 'x') shareURL = `https://twitter.com/intent/tweet?text=${msg}`;
    if (platform === 'whatsapp') shareURL = `https://wa.me/?text=${msg}`;
    window.open(shareURL, '_blank');
}

// WhatsApp button
document.querySelector('.whatsapp-btn').addEventListener('click', function(e){
    if(!leadSaved){ e.preventDefault(); alert("Please enter your details first!"); leadModal.classList.add('active'); return; }
    const msg = encodeURIComponent(`Hi, my name is ${leadData.name}. I would like to know more about MSS services.`);
    window.open(`https://wa.me/916300729253?text=${msg}`, '_blank');
});

// Email button
document.querySelector('.email-btn').addEventListener('click', function(e){
    if(!leadSaved){ e.preventDefault(); alert("Please enter your details first!"); leadModal.classList.add('active'); return; }
    const subject = encodeURIComponent("Service Inquiry");
    const body = encodeURIComponent(`Hi, my name is ${leadData.name}. I would like to know more about your services.`);
    window.location.href = `mailto:Narasimha@MokshaSecuredSystems.com?subject=${subject}&body=${body}`;
});

// FAB Contact button triggers download/contact
document.querySelector('.fab-contact').addEventListener('click', function(e){
    if(!leadSaved){ alert("Please enter your details first!"); leadModal.classList.add('active'); return; }
    downloadVCF();
});
</script>

</body>
</html>

